<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Difference-in-Differences | Impact Evaluation in Practice</title>
  <meta name="description" content="Solutions for Impact Evaluation in Practice (2nd Edition)." />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Difference-in-Differences | Impact Evaluation in Practice" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Solutions for Impact Evaluation in Practice (2nd Edition)." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Difference-in-Differences | Impact Evaluation in Practice" />
  
  <meta name="twitter:description" content="Solutions for Impact Evaluation in Practice (2nd Edition)." />
  

<meta name="author" content="Liam F. Beiser-McGrath" />
<meta name="author" content="Lecturer (Assistant Professor) in Politics, Royal Holloway, University of London" />
<meta name="author" content="www.liambeisermcgrath.com" />
<meta name="author" content="liam@liambeisermcgrath.com" />


<meta name="date" content="2020-07-29" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="regression-discontinuity-designs.html"/>
<link rel="next" href="matching.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Impact Evaluation in Practice Solutions</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preamble</a></li>
<li class="chapter" data-level="" data-path="about-the-author.html"><a href="about-the-author.html"><i class="fa fa-check"></i>About the Author</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#variable-definitions"><i class="fa fa-check"></i><b>1.1</b> Variable Definitions</a><ul>
<li class="chapter" data-level="1.1.1" data-path="intro.html"><a href="intro.html#outcome-variable"><i class="fa fa-check"></i><b>1.1.1</b> Outcome Variable</a></li>
<li class="chapter" data-level="1.1.2" data-path="intro.html"><a href="intro.html#control-variables"><i class="fa fa-check"></i><b>1.1.2</b> Control Variables</a></li>
<li class="chapter" data-level="1.1.3" data-path="intro.html"><a href="intro.html#other-variables"><i class="fa fa-check"></i><b>1.1.3</b> Other Variables</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="causal-inference-and-counterfactuals.html"><a href="causal-inference-and-counterfactuals.html"><i class="fa fa-check"></i><b>2</b> Causal Inference and Counterfactuals</a><ul>
<li class="chapter" data-level="2.1" data-path="causal-inference-and-counterfactuals.html"><a href="causal-inference-and-counterfactuals.html#before-after-designs"><i class="fa fa-check"></i><b>2.1</b> Before-After Designs</a></li>
<li class="chapter" data-level="2.2" data-path="causal-inference-and-counterfactuals.html"><a href="causal-inference-and-counterfactuals.html#enrolled-vs.-non-enrolled"><i class="fa fa-check"></i><b>2.2</b> Enrolled vs. Non-Enrolled</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="randomised-assignment.html"><a href="randomised-assignment.html"><i class="fa fa-check"></i><b>3</b> Randomised Assignment</a></li>
<li class="chapter" data-level="4" data-path="instrumental-variables.html"><a href="instrumental-variables.html"><i class="fa fa-check"></i><b>4</b> Instrumental Variables</a></li>
<li class="chapter" data-level="5" data-path="regression-discontinuity-designs.html"><a href="regression-discontinuity-designs.html"><i class="fa fa-check"></i><b>5</b> Regression Discontinuity Designs</a></li>
<li class="chapter" data-level="6" data-path="difference-in-differences.html"><a href="difference-in-differences.html"><i class="fa fa-check"></i><b>6</b> Difference-in-Differences</a></li>
<li class="chapter" data-level="7" data-path="matching.html"><a href="matching.html"><i class="fa fa-check"></i><b>7</b> Matching</a></li>
<li class="chapter" data-level="8" data-path="design-and-sampling.html"><a href="design-and-sampling.html"><i class="fa fa-check"></i><b>8</b> Design and Sampling</a><ul>
<li class="chapter" data-level="8.1" data-path="design-and-sampling.html"><a href="design-and-sampling.html#power-calculations-with-clusters"><i class="fa fa-check"></i><b>8.1</b> Power Calculations with Clusters</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="session-info.html"><a href="session-info.html"><i class="fa fa-check"></i><b>9</b> Session Info</a></li>
<li class="divider"></li>
<li><a href="www.liambeisermcgrath.com" target="blank">www.liambeisermcgrath.com</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Impact Evaluation in Practice</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="difference-in-differences" class="section level1">
<h1><span class="header-section-number">Chapter 6</span> Difference-in-Differences</h1>
<!-- ```{r, warning=FALSE, message=FALSE} -->
<!-- library(broom) -->
<!-- library(estimatr) -->
<!-- library(haven) -->
<!-- library(kableExtra) -->
<!-- library(MatchIt) -->
<!-- library(texreg) -->
<!-- library(tidyverse) -->
<!-- df <- read_dta("./data/evaluation.dta") -->
<!-- ``` -->
<p>Difference-in-differences can be used to evaluate our Health Insurance Subsidy Program (HISP). In this scenario, you have two rounds of data on two groups of households: one group that enrolled in the program, and another that did not. Remembering the case of the enrolled and non- enrolled groups, you realize that you cannot simply compare the average health expenditures of the two groups because of selection bias. Because you have data for two periods for each household in the sample, you can use those data to solve some of these challenges by comparing the change in health expenditures for the two groups, assuming that the change in the health expenditures of the non-enrolled group reflects what would have happened to the expenditures of the enrolled group in the absence of the program. Note that it does not matter which way you calculate the double difference.</p>
<p>Next, you estimate the effect using regression analysis. Using a simple linear regression to compute the simple difference-in- differences estimate, you find that the program reduced household health expenditures by US$8.16. You then refine your analysis by adding additional control variables. In other words, you use a multivariate linear regression that takes into account a host of other factors, and you find the same reduction in household health expenditures.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="difference-in-differences.html#cb23-1"></a>out_did &lt;-<span class="st"> </span><span class="kw">lm_robust</span>(health_expenditures <span class="op">~</span><span class="st"> </span>round <span class="op">*</span><span class="st"> </span>enrolled, </span>
<span id="cb23-2"><a href="difference-in-differences.html#cb23-2"></a>                     <span class="dt">data =</span> df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(treatment_locality <span class="op">==</span><span class="st"> </span><span class="dv">1</span>),</span>
<span id="cb23-3"><a href="difference-in-differences.html#cb23-3"></a>                     <span class="dt">clusters =</span> locality_identifier)</span>
<span id="cb23-4"><a href="difference-in-differences.html#cb23-4"></a></span>
<span id="cb23-5"><a href="difference-in-differences.html#cb23-5"></a>out_did_wcov &lt;-<span class="st"> </span><span class="kw">lm_robust</span>(health_expenditures <span class="op">~</span><span class="st"> </span>round <span class="op">*</span><span class="st"> </span>enrolled <span class="op">+</span></span>
<span id="cb23-6"><a href="difference-in-differences.html#cb23-6"></a><span class="st">                            </span>age_hh <span class="op">+</span><span class="st"> </span>age_sp <span class="op">+</span><span class="st"> </span>educ_hh <span class="op">+</span><span class="st"> </span>educ_sp <span class="op">+</span><span class="st"> </span></span>
<span id="cb23-7"><a href="difference-in-differences.html#cb23-7"></a><span class="st">                           </span>female_hh <span class="op">+</span><span class="st"> </span>indigenous <span class="op">+</span><span class="st"> </span>hhsize <span class="op">+</span><span class="st"> </span>dirtfloor <span class="op">+</span><span class="st"> </span></span>
<span id="cb23-8"><a href="difference-in-differences.html#cb23-8"></a><span class="st">                           </span>bathroom <span class="op">+</span><span class="st"> </span>land <span class="op">+</span><span class="st"> </span>hospital_distance, </span>
<span id="cb23-9"><a href="difference-in-differences.html#cb23-9"></a>                     <span class="dt">data =</span> df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(treatment_locality <span class="op">==</span><span class="st"> </span><span class="dv">1</span>),</span>
<span id="cb23-10"><a href="difference-in-differences.html#cb23-10"></a>                     <span class="dt">clusters =</span> locality_identifier)</span></code></pre></div>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="difference-in-differences.html#cb24-1"></a><span class="kw">htmlreg</span>(<span class="kw">list</span>(out_did, out_did_wcov), <span class="dt">doctype =</span> <span class="ot">FALSE</span>,</span>
<span id="cb24-2"><a href="difference-in-differences.html#cb24-2"></a>        <span class="dt">custom.coef.map =</span> <span class="kw">list</span>(<span class="st">&#39;enrolled&#39;</span> =<span class="st"> &quot;Enrollment&quot;</span>,</span>
<span id="cb24-3"><a href="difference-in-differences.html#cb24-3"></a>                               <span class="st">&#39;round&#39;</span> =<span class="st"> &quot;Round&quot;</span>,</span>
<span id="cb24-4"><a href="difference-in-differences.html#cb24-4"></a>                               <span class="st">&#39;round:enrolled&#39;</span> =<span class="st"> &quot;Enrollment X Round&quot;</span>),</span>
<span id="cb24-5"><a href="difference-in-differences.html#cb24-5"></a>        <span class="dt">caption =</span> <span class="st">&quot;Evaluating HISP: Difference-in-Differences with Regression&quot;</span>,</span>
<span id="cb24-6"><a href="difference-in-differences.html#cb24-6"></a>        <span class="dt">caption.above =</span> <span class="ot">TRUE</span>,</span>
<span id="cb24-7"><a href="difference-in-differences.html#cb24-7"></a>        <span class="dt">custom.model.names =</span> <span class="kw">c</span>(<span class="st">&quot;No Covariate Adjustment&quot;</span>, <span class="st">&quot;With Covariate Adjustment&quot;</span>))</span></code></pre></div>
<table class="texreg" style="margin: 10px auto;border-collapse: collapse;border-spacing: 0px;color: #000000;border-top: 2px solid #000000;">
<caption>
Evaluating HISP: Difference-in-Differences with Regression
</caption>
<thead>
<tr>
<th style="padding-left: 5px;padding-right: 5px;">
 
</th>
<th style="padding-left: 5px;padding-right: 5px;">
No Covariate Adjustment
</th>
<th style="padding-left: 5px;padding-right: 5px;">
With Covariate Adjustment
</th>
</tr>
</thead>
<tbody>
<tr style="border-top: 1px solid #000000;">
<td style="padding-left: 5px;padding-right: 5px;">
Enrollment
</td>
<td style="padding-left: 5px;padding-right: 5px;">
-6.30<sup>*</sup>
</td>
<td style="padding-left: 5px;padding-right: 5px;">
-1.51<sup>*</sup>
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
[-6.69; -5.91]
</td>
<td style="padding-left: 5px;padding-right: 5px;">
[-1.77; -1.25]
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
Round
</td>
<td style="padding-left: 5px;padding-right: 5px;">
1.51<sup>*</sup>
</td>
<td style="padding-left: 5px;padding-right: 5px;">
1.45<sup>*</sup>
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
[ 0.79; 2.24]
</td>
<td style="padding-left: 5px;padding-right: 5px;">
[ 0.73; 2.17]
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
Enrollment X Round
</td>
<td style="padding-left: 5px;padding-right: 5px;">
-8.16<sup>*</sup>
</td>
<td style="padding-left: 5px;padding-right: 5px;">
-8.16<sup>*</sup>
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
[-8.81; -7.52]
</td>
<td style="padding-left: 5px;padding-right: 5px;">
[-8.81; -7.52]
</td>
</tr>
<tr style="border-top: 1px solid #000000;">
<td style="padding-left: 5px;padding-right: 5px;">
R<sup>2</sup>
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.34
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.55
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
Adj. R<sup>2</sup>
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.34
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.55
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
Num. obs.
</td>
<td style="padding-left: 5px;padding-right: 5px;">
9919
</td>
<td style="padding-left: 5px;padding-right: 5px;">
9919
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
RMSE
</td>
<td style="padding-left: 5px;padding-right: 5px;">
7.91
</td>
<td style="padding-left: 5px;padding-right: 5px;">
6.54
</td>
</tr>
<tr style="border-bottom: 2px solid #000000;">
<td style="padding-left: 5px;padding-right: 5px;">
N Clusters
</td>
<td style="padding-left: 5px;padding-right: 5px;">
100
</td>
<td style="padding-left: 5px;padding-right: 5px;">
100
</td>
</tr>
</tbody>
<tfoot>
<tr>
<td style="font-size: 0.8em;" colspan="3">
<sup>*</sup> Null hypothesis value outside the confidence interval.
</td>
</tr>
</tfoot>
</table>
<p><strong>What are the basic assumptions required to accept this result from difference-in-differences?</strong></p>
<p>To accept this result, we assume that there are no differential time varying factors between the two groups other than the program. We assume that the treatment and comparison groups would have equal trends or changes in outcomes in the absence of treatment. While this assumption can’t be tested in the postintervention period, we can compare trends before the intervention starts.</p>
<p><strong>Based on the result from difference-in-differences, should HISP be scaled up nationally?</strong></p>
<p>No, based on this result, the HISP should not be scaled up nationally because it has decreased health expenditures by less than the $10 threshold level. Taking the estimated impact under random assignment as the “true” impact of the program suggests that the difference in difference estimate may be biased. In fact, in this case, using the nonenrolled households as a comparison group does not accurately represent the counterfactual trend in health expenditures.</p>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="regression-discontinuity-designs.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="matching.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["iep_solutions.pdf", "iep_solutions.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
